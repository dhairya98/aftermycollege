---
import { getCollection } from "astro:content";

const pathname = Astro.url.pathname;

const allCourses = await getCollection("courses");
const courses = allCourses.sort(
	(a, b) => (a.data.order ?? 999) - (b.data.order ?? 999)
);
// const sampleCourses = Array.from({ length: 10 }, () => courses).flat();
---

<nav class="space-y-6">
	<h3 class="text-xs uppercase font-semibold tracking-wide text-gray-500">
		All Courses
	</h3>

	<ul class="space-y-1">
		{
			courses.map((course) => {
				const active = pathname.includes(`/courses/${course.id}`);
				return (
					<li>
						<a
							href={`/courses/${course.id}`}
							class={`block px-3 py-2 rounded-lg text-sm transition ${
								active
									? "bg-blue-100 text-blue-800 font-medium"
									: "text-gray-700 hover:bg-gray-100"
							}`}
						>
							{course.data.title}
						</a>
					</li>
				);
			})
		}
	</ul>
</nav>
