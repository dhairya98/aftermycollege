---
// src/layouts/CourseLayout.astro
import SidebarCourse from "../components/SidebarCourse.astro";
import SidebarAllCourses from "../components/SidebarAllCourses.astro";
import SidebarChapters from "../components/SidebarChapters.astro";
import Footer from "../components/Footer.astro";
import Navbar from "../components/Navbar.astro";

interface Props {
	title?: string;
	description?: string;
	image?: string;
	courseSlug?: string;
	showHero?: boolean;
	showToc?: boolean;
}

const {
	title = "",
	description = "",
	image = "",
	courseSlug = "",
	showHero = true,
	showToc = false,
} = Astro.props;

const hasRightSidebar = Astro.slots.has("toc") || showToc;
---

<!-- <Navbar /> -->
<div class="min-h-screen bg-white text-gray-900 flex">
	<!-- Sidebar 1: All Courses -->
	<aside class="w-64 border-r border-gray-200 bg-gray-50 hidden xl:block">
		<div class="sticky top-20 h-[calc(100vh-5rem)] overflow-y-auto p-5">
			<SidebarAllCourses />
		</div>
	</aside>

	<!-- Sidebar 2: Chapters -->
	<aside class="w-72 border-r border-gray-200 bg-white hidden lg:block">
		<div class="sticky top-20 h-[calc(100vh-5rem)] overflow-y-auto p-5">
			<SidebarChapters courseSlug={courseSlug} />
		</div>
	</aside>

	<!-- Main Content -->
	<main class="flex-1 overflow-y-auto">
		<div class="max-w-4xl mx-auto px-6 py-10">
			{
				showHero && (
					<section class="mb-10">
						<div class="flex flex-col md:flex-row gap-8 items-start">
							{image && (
								<img
									src={image}
									alt={title}
									class="w-full md:w-1/2 rounded-xl shadow object-cover"
								/>
							)}

							<div>
								<h1 class="text-3xl font-extrabold text-slate-900 mb-3">
									{title}
								</h1>
								<p class="text-gray-600 mb-4">{description}</p>
								<button class="px-5 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-lg transition">
									Start learning
								</button>
							</div>
						</div>
					</section>
				)
			}

			<!-- Lesson Content -->
			<article class="prose prose-slate max-w-none">
				<slot />
			</article>
		</div>
	</main>

	<!-- Right Sidebar: TOC -->
	{
		hasRightSidebar && (
			<aside class="w-64 border-l border-gray-100 bg-white hidden xl:block">
				<div class="sticky top-20 h-[calc(100vh-5rem)] overflow-y-auto p-5">
					<slot name="toc" />
				</div>
			</aside>
		)
	}
</div>
<!-- <Footer /> -->
